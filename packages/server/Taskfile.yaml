version: '3'
tasks:
  prepare:
    desc: "ğŸ”§ Prepara o projeto para instalaÃ§Ã£o"
    cmds:
      - echo "ğŸ”§ Preparando ambiente do projeto..."
      # Adicione comandos de preparaÃ§Ã£o aqui (ex: copiar .env.example, checar prÃ©-requisitos)

  install:
    desc: "ğŸ“¦ Instala todas as dependÃªncias"
    cmds:
      - pnpm install || npm install || yarn install

  dev:
    desc: "ğŸš€ Executa em modo desenvolvimento"
    cmds:
      - pnpm run dev || npm run dev || yarn dev

  serve:
    desc: "ğŸŒ Executa em modo produÃ§Ã£o"
    cmds:
      - pnpm run start || npm run start || yarn start

  clean:
    desc: "ğŸ§¹ Limpa dependÃªncias, caches e temporÃ¡rios"
    cmds:
      - rm -rf node_modules dist .turbo .next .cache coverage .eslintcache

  build:
    desc: "ğŸ—ï¸  Realiza o build do projeto"
    cmds:
      - pnpm run build || npm run build || yarn build

  format:
    desc: "ğŸ¨ Formata o cÃ³digo-fonte"
    cmds:
      - pnpm run format || npm run format || yarn format

  lint:
    desc: "ğŸ” Valida o cÃ³digo com linter"
    cmds:
      - pnpm run lint || npm run lint || yarn lint

  test:
    desc: "ğŸ§ª Executa testes unitÃ¡rios"
    cmds:
      - pnpm run test || npm run test || yarn test

  test-e2e:
    desc: "ğŸ§ªğŸ”— Executa testes de integraÃ§Ã£o/end-to-end"
    cmds:
      - pnpm run test:e2e || npm run test:e2e || yarn test:e2e

  docker-build:
    desc: "ğŸ³ Builda a imagem Docker"
    cmds:
      - docker build -t ${IMAGE:-server:latest} .

  docker-push:
    desc: "ğŸ“¦ Envia a imagem Docker para o registry"
    cmds:
      - docker push ${IMAGE:-server:latest}

  help:
    desc: "ğŸ†˜ Mostra esta ajuda"
    cmds:
      - echo "\nComandos disponÃ­veis:\n"
      - echo "  ğŸ”§  prepare      â€” Prepara o projeto para instalaÃ§Ã£o"
      - echo "  ğŸ“¦  install      â€” Instala todas as dependÃªncias"
      - echo "  ğŸš€  dev          â€” Executa em modo desenvolvimento"
      - echo "  ğŸŒ  serve        â€” Executa em modo produÃ§Ã£o"
      - echo "  ğŸ§¹  clean        â€” Limpa dependÃªncias, caches e temporÃ¡rios"
      - echo "  ğŸ—ï¸   build        â€” Realiza o build do projeto"
      - echo "  ğŸ¨  format       â€” Formata o cÃ³digo-fonte"
      - echo "  ğŸ”  lint         â€” Valida o cÃ³digo com linter"
      - echo "  ğŸ§ª  test         â€” Executa testes unitÃ¡rios"
      - echo "  ğŸ§ªğŸ”—  test-e2e     â€” Executa testes de integraÃ§Ã£o/end-to-end"
      - echo "  ğŸ³  docker-build â€” Builda a imagem Docker"
      - echo "  ğŸ“¦  docker-push  â€” Envia a imagem Docker para o registry"
      - echo "  ğŸ†˜  help         â€” Mostra esta ajuda\n"
